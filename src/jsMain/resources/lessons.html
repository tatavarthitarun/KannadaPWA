<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kannada PWA - Phase 7: Full Lesson Interface</title>
    <meta name="description" content="Learn Kannada with interactive lessons and exercises">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#764ba2">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Kannada PWA">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }
        
        .lesson-container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .lesson-header {
            background: rgba(255,255,255,0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            text-align: center;
        }
        
        .lesson-title {
            font-size: 2.5rem;
            color: #667eea;
            margin-bottom: 10px;
        }
        
        .lesson-subtitle {
            font-size: 1.5rem;
            color: #764ba2;
            margin-bottom: 20px;
        }
        
        .lesson-meta {
            display: flex;
            justify-content: center;
            gap: 30px;
            flex-wrap: wrap;
        }
        
        .meta-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 20px;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 25px;
            font-weight: 600;
        }
        
        .lesson-content {
            background: rgba(255,255,255,0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
        }
        
        .content-section {
            margin-bottom: 30px;
        }
        
        .content-section h3 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .letter-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .letter-card {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            cursor: pointer;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .letter-card:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
        }
        
        .letter-kannada {
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .letter-telugu {
            font-size: 1.8rem;
            margin-bottom: 8px;
        }
        
        .letter-english {
            font-size: 1.2rem;
            margin-bottom: 8px;
        }
        
        .letter-pronunciation {
            font-size: 0.9rem;
            opacity: 0.9;
        }
        
        .exercise-section {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
        }
        
        .exercise-question {
            font-size: 1.2rem;
            margin-bottom: 20px;
            color: #333;
        }
        
        .exercise-options {
            display: grid;
            gap: 15px;
        }
        
        .exercise-option {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 15px 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.1rem;
        }
        
        .exercise-option:hover {
            border-color: #667eea;
            background: #f8f9ff;
        }
        
        .exercise-option.selected {
            border-color: #667eea;
            background: #667eea;
            color: white;
        }
        
        .exercise-option.correct {
            border-color: #28a745;
            background: #28a745;
            color: white;
        }
        
        .exercise-option.incorrect {
            border-color: #dc3545;
            background: #dc3545;
            color: white;
        }
        
        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }
        
        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }
        
        .progress-bar {
            width: 100%;
            height: 10px;
            background: #e9ecef;
            border-radius: 5px;
            overflow: hidden;
            margin: 20px 0;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            border-radius: 5px;
            transition: width 0.3s ease;
        }
        
        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }
        
        .achievement-badge {
            display: inline-block;
            background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%);
            color: #333;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            margin: 10px 5px;
            animation: bounce 0.6s ease;
        }
        
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }
        
        .feedback-message {
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            font-weight: 600;
            text-align: center;
        }
        
        .feedback-success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .feedback-error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        @media (max-width: 768px) {
            .lesson-container {
                padding: 15px;
            }
            
            .lesson-title {
                font-size: 2rem;
            }
            
            .lesson-meta {
                flex-direction: column;
                align-items: center;
            }
            
            .letter-grid {
                grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
                gap: 15px;
            }
            
            .navigation-buttons {
                flex-direction: column;
                gap: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="lesson-container">
        <!-- Lesson Header -->
        <div class="lesson-header">
            <h1 class="lesson-title">‡≤ï‡≤®‡≥ç‡≤®‡≤° ‡≤∏‡≥ç‡≤µ‡≤∞‡≤ó‡≤≥‡≥Å</h1>
            <h2 class="lesson-subtitle">Kannada Vowels</h2>
            <div class="lesson-meta">
                <div class="meta-item">
                    <span>‚è±Ô∏è</span>
                    <span>15 minutes</span>
                </div>
                <div class="meta-item">
                    <span>üéØ</span>
                    <span>BEGINNER</span>
                </div>
                <div class="meta-item">
                    <span>üìö</span>
                    <span>13 vowels</span>
                </div>
            </div>
        </div>
        
        <!-- Lesson Content -->
        <div class="lesson-content">
            <div class="content-section">
                <h3>üî§ Introduction to Kannada Vowels</h3>
                <p>Kannada has 13 vowels (‡≤∏‡≥ç‡≤µ‡≤∞‡≤ó‡≤≥‡≥Å) that form the foundation of the language. Each vowel has a unique sound and can be written independently or combined with consonants.</p>
            </div>
            
            <!-- Vowels Grid -->
            <div class="content-section">
                <h3>üéØ Learn the Vowels</h3>
                <div class="letter-grid" id="vowels-grid">
                    <!-- Vowels will be populated by JavaScript -->
                </div>
            </div>
            
            <!-- Exercise Section -->
            <div class="content-section">
                <h3>üß† Practice Exercise</h3>
                <div class="exercise-section">
                    <div class="exercise-question" id="exercise-question">
                        Click "Start Exercise" to begin practicing!
                    </div>
                    <div class="exercise-options" id="exercise-options">
                        <!-- Exercise options will be populated by JavaScript -->
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="exercise-progress" style="width: 0%"></div>
                    </div>
                    <div style="text-align: center; margin-top: 20px;">
                        <button class="btn" id="start-exercise">Start Exercise</button>
                        <button class="btn" id="check-answer" style="display: none;">Check Answer</button>
                        <button class="btn" id="next-question" style="display: none;">Next Question</button>
                    </div>
                </div>
            </div>
            
            <!-- Achievement Section -->
            <div class="content-section">
                <h3>üèÜ Achievements</h3>
                <div id="achievements-container">
                    <div class="achievement-badge">üéØ First Vowel Learned</div>
                    <div class="achievement-badge">üî§ 5 Vowels Mastered</div>
                </div>
            </div>
            
            <!-- Navigation -->
            <div class="navigation-buttons">
                <button class="btn" id="prev-lesson" onclick="goToPreviousLesson()">‚Üê Previous Lesson</button>
                <button class="btn" id="next-lesson" onclick="goToNextLesson()">Next Lesson ‚Üí</button>
            </div>
        </div>
    </div>

    <script>
        // Lesson data
        const lessonData = {
            title: "‡≤ï‡≤®‡≥ç‡≤®‡≤° ‡≤∏‡≥ç‡≤µ‡≤∞‡≤ó‡≤≥‡≥Å",
            subtitle: "Kannada Vowels",
            duration: 15,
            difficulty: "BEGINNER",
            vowelCount: 13,
            vowels: [
                { kannada: "‡≤Ö", telugu: "‡∞Ö", english: "a", pronunciation: "ah (like 'a' in 'about')" },
                { kannada: "‡≤Ü", telugu: "‡∞Ü", english: "ƒÅ", pronunciation: "aa (like 'a' in 'father')" },
                { kannada: "‡≤á", telugu: "‡∞á", english: "i", pronunciation: "ee (like 'i' in 'bit')" },
                { kannada: "‡≤à", telugu: "‡∞à", english: "ƒ´", pronunciation: "ee (like 'ee' in 'see')" },
                { kannada: "‡≤â", telugu: "‡∞â", english: "u", pronunciation: "oo (like 'u' in 'put')" },
                { kannada: "‡≤ä", telugu: "‡∞ä", english: "≈´", pronunciation: "oo (like 'oo' in 'moon')" },
                { kannada: "‡≤é", telugu: "‡∞é", english: "e", pronunciation: "e (like 'e' in 'bed')" },
                { kannada: "‡≤è", telugu: "‡∞è", english: "ƒì", pronunciation: "e (like 'ay' in 'say')" },
                { kannada: "‡≤ê", telugu: "‡∞ê", english: "ai", pronunciation: "ai (like 'ai' in 'aisle')" },
                { kannada: "‡≤í", telugu: "‡∞í", english: "o", pronunciation: "o (like 'o' in 'go')" },
                { kannada: "‡≤ì", telugu: "‡∞ì", english: "≈ç", pronunciation: "o (like 'o' in 'go')" },
                { kannada: "‡≤î", telugu: "‡∞î", english: "au", pronunciation: "au (like 'ow' in 'cow')" }
            ]
        };
        
        // Exercise state
        let currentExercise = 0;
        let selectedAnswer = null;
        let correctAnswers = 0;
        let totalQuestions = 0;
        
        // Initialize the lesson
        function initializeLesson() {
            populateVowels();
            setupExerciseSystem();
            console.log('üéì Phase 7: Full Lesson Interface initialized!');
        }
        
        // Populate vowels grid
        function populateVowels() {
            const grid = document.getElementById('vowels-grid');
            grid.innerHTML = '';
            
            lessonData.vowels.forEach((vowel, index) => {
                const card = document.createElement('div');
                card.className = 'letter-card';
                card.innerHTML = `
                    <div class="letter-kannada">${vowel.kannada}</div>
                    <div class="letter-telugu">${vowel.telugu}</div>
                    <div class="letter-english">${vowel.english}</div>
                    <div class="letter-pronunciation">${vowel.pronunciation}</div>
                `;
                card.onclick = () => practiceVowel(vowel, index);
                grid.appendChild(card);
            });
        }
        
        // Practice individual vowel
        function practiceVowel(vowel, index) {
            console.log(`üî§ Practicing vowel: ${vowel.kannada}`);
            alert(`Practice: ${vowel.kannada} (${vowel.telugu}) - ${vowel.english}\n\nPronunciation: ${vowel.pronunciation}\n\nThis vowel is at position ${index + 1} in the alphabet.`);
        }
        
        // Setup exercise system
        function setupExerciseSystem() {
            const startBtn = document.getElementById('start-exercise');
            const checkBtn = document.getElementById('check-answer');
            const nextBtn = document.getElementById('next-question');
            
            startBtn.onclick = startExercise;
            checkBtn.onclick = checkAnswer;
            nextBtn.onclick = nextQuestion;
        }
        
        // Start exercise
        function startExercise() {
            currentExercise = 0;
            correctAnswers = 0;
            totalQuestions = 5;
            
            document.getElementById('start-exercise').style.display = 'none';
            document.getElementById('check-answer').style.display = 'inline-block';
            
            showQuestion();
        }
        
        // Show current question
        function showQuestion() {
            const questionEl = document.getElementById('exercise-question');
            const optionsEl = document.getElementById('exercise-options');
            
            const currentVowel = lessonData.vowels[currentExercise];
            const questionTypes = [
                {
                    question: `What is the Telugu equivalent of ${currentVowel.kannada}?`,
                    correct: currentVowel.telugu,
                    options: generateOptions(currentVowel.telugu, 'telugu')
                },
                {
                    question: `What is the English equivalent of ${currentVowel.kannada}?`,
                    correct: currentVowel.english,
                    options: generateOptions(currentVowel.english, 'english')
                },
                {
                    question: `Which vowel has the pronunciation: "${currentVowel.pronunciation}"?`,
                    correct: currentVowel.kannada,
                    options: generateOptions(currentVowel.kannada, 'kannada')
                }
            ];
            
            const questionType = questionTypes[currentExercise % 3];
            questionEl.textContent = questionType.question;
            
            optionsEl.innerHTML = '';
            questionType.options.forEach((option, index) => {
                const optionEl = document.createElement('div');
                optionEl.className = 'exercise-option';
                optionEl.textContent = option;
                optionEl.onclick = () => selectOption(optionEl, option);
                optionsEl.appendChild(optionEl);
            });
            
            updateProgress();
        }
        
        // Generate exercise options
        function generateOptions(correct, type) {
            const options = [correct];
            
            if (type === 'telugu') {
                const teluguChars = ['‡∞Ö', '‡∞Ü', '‡∞á', '‡∞à', '‡∞â', '‡∞ä', '‡∞é', '‡∞è', '‡∞ê', '‡∞í', '‡∞ì', '‡∞î'];
                while (options.length < 4) {
                    const randomChar = teluguChars[Math.floor(Math.random() * teluguChars.length)];
                    if (!options.includes(randomChar)) {
                        options.push(randomChar);
                    }
                }
            } else if (type === 'english') {
                const englishChars = ['a', 'ƒÅ', 'i', 'ƒ´', 'u', '≈´', 'e', 'ƒì', 'ai', 'o', '≈ç', 'au'];
                while (options.length < 4) {
                    const randomChar = englishChars[Math.floor(Math.random() * englishChars.length)];
                    if (!options.includes(randomChar)) {
                        options.push(randomChar);
                    }
                }
            } else {
                const kannadaChars = ['‡≤Ö', '‡≤Ü', '‡≤á', '‡≤à', '‡≤â', '‡≤ä', '‡≤é', '‡≤è', '‡≤ê', '‡≤í', '‡≤ì', '‡≤î'];
                while (options.length < 4) {
                    const randomChar = kannadaChars[Math.floor(Math.random() * kannadaChars.length)];
                    if (!options.includes(randomChar)) {
                        options.push(randomChar);
                    }
                }
            }
            
            // Shuffle options
            return options.sort(() => Math.random() - 0.5);
        }
        
        // Select option
        function selectOption(optionEl, option) {
            // Clear previous selection
            document.querySelectorAll('.exercise-option').forEach(el => {
                el.classList.remove('selected');
            });
            
            optionEl.classList.add('selected');
            selectedAnswer = option;
        }
        
        // Check answer
        function checkAnswer() {
            if (selectedAnswer === null) {
                alert('Please select an answer first!');
                return;
            }
            
            const currentVowel = lessonData.vowels[currentExercise];
            const questionType = currentExercise % 3;
            let correct = '';
            
            if (questionType === 0) correct = currentVowel.telugu;
            else if (questionType === 1) correct = currentVowel.english;
            else correct = currentVowel.kannada;
            
            const isCorrect = selectedAnswer === correct;
            
            if (isCorrect) {
                correctAnswers++;
                showFeedback('Correct! Well done! üéâ', 'success');
            } else {
                showFeedback(`Incorrect. The correct answer is: ${correct}`, 'error');
            }
            
            // Mark options
            document.querySelectorAll('.exercise-option').forEach(el => {
                if (el.textContent === correct) {
                    el.classList.add('correct');
                } else if (el.textContent === selectedAnswer && !isCorrect) {
                    el.classList.add('incorrect');
                }
            });
            
            document.getElementById('check-answer').style.display = 'none';
            document.getElementById('next-question').style.display = 'inline-block';
        }
        
        // Next question
        function nextQuestion() {
            currentExercise++;
            
            if (currentExercise >= totalQuestions) {
                finishExercise();
            } else {
                showQuestion();
                document.getElementById('check-answer').style.display = 'inline-block';
                document.getElementById('next-question').style.display = 'none';
                selectedAnswer = null;
                
                // Clear option styling
                document.querySelectorAll('.exercise-option').forEach(el => {
                    el.classList.remove('selected', 'correct', 'incorrect');
                });
            }
        }
        
        // Finish exercise
        function finishExercise() {
            const score = Math.round((correctAnswers / totalQuestions) * 100);
            const message = `Exercise completed! üéâ\n\nScore: ${score}%\nCorrect: ${correctAnswers}/${totalQuestions}`;
            
            alert(message);
            
            // Reset exercise
            document.getElementById('start-exercise').style.display = 'inline-block';
            document.getElementById('check-answer').style.display = 'none';
            document.getElementById('next-question').style.display = 'none';
            document.getElementById('exercise-question').textContent = 'Click "Start Exercise" to begin practicing!';
            document.getElementById('exercise-options').innerHTML = '';
            document.getElementById('exercise-progress').style.width = '0%';
            
            // Show achievements
            if (score >= 80) {
                showAchievement('üéØ Exercise Master!', 'Completed exercise with 80%+ score');
            }
        }
        
        // Update progress
        function updateProgress() {
            const progress = (currentExercise / totalQuestions) * 100;
            document.getElementById('exercise-progress').style.width = progress + '%';
        }
        
        // Show feedback
        function showFeedback(message, type) {
            const feedbackEl = document.createElement('div');
            feedbackEl.className = `feedback-message feedback-${type}`;
            feedbackEl.textContent = message;
            
            const exerciseSection = document.querySelector('.exercise-section');
            exerciseSection.insertBefore(feedbackEl, exerciseSection.querySelector('.progress-bar'));
            
            setTimeout(() => {
                feedbackEl.remove();
            }, 3000);
        }
        
        // Show achievement
        function showAchievement(title, description) {
            const achievementEl = document.createElement('div');
            achievementEl.className = 'achievement-badge';
            achievementEl.textContent = title;
            achievementEl.title = description;
            
            document.getElementById('achievements-container').appendChild(achievementEl);
            
            setTimeout(() => {
                achievementEl.remove();
            }, 5000);
        }
        
        // Navigation functions
        function goToPreviousLesson() {
            alert('This would navigate to the previous lesson in Phase 8!');
        }
        
        function goToNextLesson() {
            alert('This would navigate to the next lesson in Phase 8!');
        }
        
        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', initializeLesson);
        
        console.log('üöÄ Phase 7: Full Lesson Interface loaded successfully!');
    </script>
</body>
</html>
